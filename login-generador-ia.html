<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlyphCode: Generador de Contenido IA para Blogs y SEO en 1 Clic</title>
    <meta name="description" content="GlyphCode es tu herramienta de IA para crear artículos SEO en 1 clic. Genera contenido en masa, optimiza para Yoast y publica automáticamente en WordPress.">
    <link rel="icon" type="image/svg+xml" href="favicon.svg"> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@700&family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<header class="landing-header">
    <div class="container landing-header-container">
        <a href="/index.html" class="logo-link" aria-label="GlyphCode Home">
            <svg class="logo-svg" width="200" height="40" viewBox="0 0 200 40" xmlns="https://www.w3.org/2000/svg"><text x="0" y="30" class="logo-text">GlyphCode</text></svg>
        </a>
        <nav class="landing-nav" id="landing-nav">
            <ul class="landing-nav-menu">
                <li><a href="#features">Características</a></li>
                <li><a href="#how-it-works">Cómo funciona</a></li>
                <li><a href="#precios">Precios</a></li>
                <li><a href="/docs" target="_blank" rel="noopener noreferrer">Documentación</a></li>
            </ul>
            <div class="landing-nav-actions">
                <button id="nav-login-btn" class="nav-action-link">Acceso</button>
                <button id="nav-signup-btn" class="btn btn-primary">Empieza - Es gratis</button>
            </div>
        </nav>
        <button class="hamburger-button" id="landing-hamburger-btn" aria-label="Abrir menú">
            <span class="hamburger-line"></span><span class="hamburger-line"></span><span class="hamburger-line"></span>
        </button>
    </div>
</header>
<main class="landing-content">
    <section class="hero-landing container">
        <h1 class="landing-title">De una Palabra Clave a un Artículo Publicado. <span class="highlight-text">En 1 Clic.</span></h1>
        <h2 class="landing-subtitle">La IA que Escribe, Optimiza y Publica Contenido SEO por Ti.</h2>
        <p class="landing-description">GlyphCode es tu súper-agente de contenido. Analiza a los ganadores de Google, extrae su estructura y genera artículos 100% optimizados, listos para dominar los rankings.</p>
        <div class="hero-cta">
            <button id="hero-signup-btn" class="btn btn-primary btn-large">Crear mi Artículo Gratis Ahora →</button>
            <p class="hero-sub-cta">Únete a miles de creadores. No se requiere tarjeta de crédito.</p>
        </div>
    </section>
    <!-- El resto de tu HTML que no cambia -->
</main>
<footer class="main-footer">
    <div class="container">
        <div class="footer-bottom">
            <p>© 2025 GlyphCode. Todos los derechos reservados.</p>
            <nav class="footer-legal-nav">
                <a href="/politica-privacidad.html">Política de Privacidad</a>
                <a href="/politica-cookies.html">Política de Cookies</a>
                <a href="/terminos-condiciones.html">Términos y Condiciones</a>
            </nav>
        </div>
    </div>
</footer>
<div id="auth-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <button id="modal-close" class="modal-close">×</button>
        <div id="auth-view">
            <h2 id="modal-title"></h2>
            <form id="modal-form" class="contact-form">
                <div class="form-group"><label for="modal-email">Correo Electrónico:</label><input type="email" id="modal-email" name="email" required autocomplete="email"></div>
                <div class="form-group"><label for="modal-password" id="password-label">Contraseña:</label><div class="password-wrapper"><input type="password" id="modal-password" name="clave_acceso" required autocomplete="current-password"><span class="password-toggle-icon" id="password-toggle"><svg class="eye-open" xmlns="https://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg><svg class="eye-closed hidden" xmlns="https://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg></span></div></div>
                <button type="submit" id="modal-submit-btn" class="btn btn-primary btn-full-width"></button>
            </form>
            <div class="modal-footer-links"><a href="#" id="forgot-password-link">¿Olvidaste tu contraseña?</a></div>
        </div>
        <div id="reset-view" class="hidden">
            <h2 id="reset-modal-title">Recuperar Contraseña</h2>
            <p class="modal-description">Introduce tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña.</p>
            <form id="reset-form" class="contact-form">
                 <div class="form-group"><label for="reset-email">Correo Electrónico:</label><input type="email" id="reset-email" name="email" required autocomplete="email"></div>
                <button type="submit" id="reset-submit-btn" class="btn btn-primary btn-full-width">Enviar Enlace</button>
            </form>
             <div class="modal-footer-links"><a href="#" id="back-to-login-link">← Volver al Acceso</a></div>
        </div>
    </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const landingNav = document.getElementById('landing-nav');
    const landingHamburgerBtn = document.getElementById('landing-hamburger-btn');
    if (landingHamburgerBtn) {
        landingHamburgerBtn.addEventListener('click', () => {
            landingNav.classList.toggle('nav-active');
            landingHamburgerBtn.classList.toggle('is-active');
            document.body.classList.toggle('no-scroll');
        });
    }
    const modal = document.getElementById('auth-modal');
    const modalOverlay = document.querySelector('.modal-overlay');
    const modalCloseBtn = document.getElementById('modal-close');
    const authView = document.getElementById('auth-view');
    const resetView = document.getElementById('reset-view');
    const modalTitle = document.getElementById('modal-title');
    const modalForm = document.getElementById('modal-form');
    const modalSubmitBtn = document.getElementById('modal-submit-btn');
    const passwordInput = document.getElementById('modal-password');
    const passwordLabel = document.getElementById('password-label');
    const passwordToggle = document.getElementById('password-toggle');
    const eyeOpen = passwordToggle.querySelector('.eye-open');
    const eyeClosed = passwordToggle.querySelector('.eye-closed');
    const forgotPasswordLink = document.getElementById('forgot-password-link');
    const resetForm = document.getElementById('reset-form');
    const resetSubmitBtn = document.getElementById('reset-submit-btn');
    const backToLoginLink = document.getElementById('back-to-login-link');
    const navLoginBtn = document.getElementById('nav-login-btn');
    const navSignupBtn = document.getElementById('nav-signup-btn');
    const heroSignupBtn = document.getElementById('hero-signup-btn');
    const finalCtaBtn = document.getElementById('final-cta-btn');
    let currentMode = 'signup'; 

    const openModal = (mode, title, buttonText) => {
        currentMode = mode;
        if(modalForm) modalForm.reset(); 
        if(resetForm) resetForm.reset();
        if (authView) authView.classList.remove('hidden');
        if (resetView) resetView.classList.add('hidden');
        if (mode === 'login') {
            if(modalTitle) modalTitle.textContent = 'Acceder a tu Cuenta';
            if(passwordLabel) passwordLabel.textContent = 'Contraseña:';
            if(modalSubmitBtn) modalSubmitBtn.textContent = 'Acceder';
        } else {
            if(modalTitle) modalTitle.textContent = title || 'Crear Cuenta Nueva';
            if(passwordLabel) passwordLabel.textContent = 'Nueva Contraseña:';
            if(modalSubmitBtn) modalSubmitBtn.textContent = buttonText || 'Registrarse';
        }
        if(modal) modal.classList.remove('hidden');
    };

    const closeModal = () => { if(modal) modal.classList.add('hidden'); };

    if (passwordToggle) {
        passwordToggle.addEventListener('click', () => {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            eyeOpen.classList.toggle('hidden');
            eyeClosed.classList.toggle('hidden');
        });
    }

    if (forgotPasswordLink) {
        forgotPasswordLink.addEventListener('click', (e) => { e.preventDefault(); authView.classList.add('hidden'); resetView.classList.remove('hidden'); });
    }

    if (backToLoginLink) {
        backToLoginLink.addEventListener('click', (e) => { e.preventDefault(); resetView.classList.add('hidden'); authView.classList.remove('hidden'); });
    }

    if(modalForm) {
        modalForm.addEventListener('submit', async (event) => {
            event.preventDefault();
            const originalButtonText = modalSubmitBtn.textContent;
            modalSubmitBtn.textContent = 'ENVIANDO...';
            modalSubmitBtn.disabled = true;
            const email = document.getElementById('modal-email').value;
            const password = document.getElementById('modal-password').value;
            const isLogin = currentMode === 'login';
            // ▼▼▼ CORRECCIÓN APLICADA ▼▼▼
            const endpoint = isLogin ? 'https://api.glyphcode.com/api/login' : 'https://api.glyphcode.com/api/register';
            try {
                const response = await fetch(endpoint, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, clave_acceso: password }),
                });
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({ message: `Error del servidor: ${response.status}` }));
                    throw new Error(errorData.message);
                }
                const data = await response.json();
                if (isLogin) {
                    localStorage.setItem('userId', data.userId); 
                    window.location.href = "/dashboard-ia.html";
                } else {
                    alert('¡Registro completado con éxito! Ahora puedes acceder con tus datos.');
                    openModal('login'); 
                }
            } catch (error) {
                console.error(`Error en ${currentMode}:`, error);
                alert(`Hubo un problema: ${error.message}`); 
            } finally {
                modalSubmitBtn.textContent = originalButtonText;
                modalSubmitBtn.disabled = false;
            }
        });
    }

    if(resetForm) {
        resetForm.addEventListener('submit', async (event) => {
            event.preventDefault();
            const originalButtonText = resetSubmitBtn.textContent;
            resetSubmitBtn.textContent = 'ENVIANDO...';
            resetSubmitBtn.disabled = true;
            const email = document.getElementById('reset-email').value;
            try {
                // ▼▼▼ CORRECCIÓN APLICADA ▼▼▼
                const response = await fetch('https://api.glyphcode.com/api/forgot-password', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email }),
                });
                const data = await response.json();
                alert(data.message); 
                if (response.ok) { closeModal(); }
            } catch (error) {
                console.error('Error en forgot-password:', error);
                alert('Hubo un problema al enviar el enlace.');
            } finally {
                resetSubmitBtn.textContent = originalButtonText;
                resetSubmitBtn.disabled = false;
            }
        });
    }
    
    const openSignupModal = () => openModal('signup', 'Crea tu Cuenta Gratuita', 'Confirmar y Empezar');
    if(navLoginBtn) navLoginBtn.addEventListener('click', () => openModal('login'));
    if(navSignupBtn) navSignupBtn.addEventListener('click', openSignupModal);
    if(heroSignupBtn) heroSignupBtn.addEventListener('click', openSignupModal);
    if(finalCtaBtn) finalCtaBtn.addEventListener('click', openSignupModal);
    
    if(modalCloseBtn) modalCloseBtn.addEventListener('click', closeModal);
    if(modalOverlay) modalOverlay.addEventListener('click', (event) => {
        if (event.target === modalOverlay) closeModal();
    });
    document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape' && modal && !modal.classList.contains('hidden')) closeModal();
    });
});
</script>
</body>
</html>